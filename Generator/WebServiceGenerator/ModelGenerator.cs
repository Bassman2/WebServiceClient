using Microsoft.CodeAnalysis;
using System.Text;
using WebServiceGenerator.GeneratorLibrary;

namespace WebServiceGenerator
{
    [Generator]
    public class ModelGenerator : Generator
    {
        public override void Excecute()
        {
            //Debugger.Launch();

            // for debug only
            CreateDebug();

            foreach (var cl in GetAllClassesWithAttribute("WebServiceClient.Attributes.ModelAttribute"))
            {
                string className = cl.Name.Replace("Model", "");
                string nameSpace = cl.RootNameSpace;

                StringBuilder sb = new();
                sb.AppendLine("// <auto-generated />");
                sb.AppendLine();
                sb.AppendLine($"namespace {nameSpace}.Dummy;");
                sb.AppendLine();
                sb.AppendLine($"public partial class {className}");
                sb.AppendLine("{");
                sb.AppendLine("}");

                AddSource($"{className}.g.cs", sb.ToString());
            }
        }

        
    }
}
    
